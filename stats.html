{% extends "base.html" %}

{% block content %}
<div class="url-card">
    <h1 class="mb-4">URL Statistics</h1>
    <a href="{{ url_for('index') }}" class="btn btn-primary mb-3">Back to Shortener</a>

    {% if stats %}
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Short Code</th>
                    <th>Original URL</th>
                    <th>Visits</th>
                    <th>Short URL</th>
                </tr>
            </thead>
            <tbody>
                {% for short_code, data in stats %}
                <tr>
                    <td>{{ short_code }}</td>
                    <td class="text-truncate" style="max-width: 200px;">
                        <a href="{{ data.original_url }}" target="_blank">
                            {{ data.original_url }}
                        </a>
                    </td>
                    <td>{{ data.visits }}</td>
                    <td>
                        <a href="{{ url_for('redirect_to_url', short_code=short_code, _external=True) }}"
                           target="_blank">
                            {{ url_for('redirect_to_url', short_code=short_code, _external=True) }}
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info">No URLs have been shortened yet.</div>
    {% endif %}
</div>
{% endblock %}
