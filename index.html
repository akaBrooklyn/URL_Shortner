{% extends "base.html" %}

{% block content %}
<div class="hero-section text-center">
    <h1 class="display-4 fw-bold mb-3"><i class="fas fa-link me-2"></i>URL Shortener</h1>
    <p class="lead">Create short, memorable links in seconds</p>
</div>

<div class="text-center">
    <form method="POST" action="{{ url_for('index') }}" class="mb-4">
        <div class="input-group input-group-lg">
            <input type="url" class="form-control" name="url"
                   placeholder="https://example.com" required>
            <button class="btn btn-primary" type="submit">
                <i class="fas fa-rocket me-2"></i>Shorten
            </button>
        </div>
    </form>

    {% if short_url %}
    <div class="url-card card mt-4">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-paperclip me-2"></i>Your Short URL</h5>
            <div class="input-group mb-3 input-group-lg">
                <input type="text" class="form-control" value="{{ short_url }}"
                       id="shortUrl" readonly>
                <button class="btn btn-outline-secondary copy-btn" onclick="copyToClipboard()" id="copyButton">
                    <i class="far fa-copy me-1"></i> Copy
                </button>
            </div>
            <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                <a href="{{ short_url }}" target="_blank" class="btn btn-success btn-lg">
                    <i class="fas fa-external-link-alt me-1"></i> Test It
                </a>
                <a href="{{ url_for('stats') }}" class="btn btn-info btn-lg">
                    <i class="fas fa-chart-bar me-1"></i> View Stats
                </a>
                <a href="{{ url_for('clear_short_url') }}" class="btn btn-warning btn-lg">
                    <i class="fas fa-broom me-1"></i> Clear
                </a>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
    function copyToClipboard() {
        const copyText = document.getElementById("shortUrl");
        const copyButton = document.getElementById("copyButton");

        copyText.select();
        document.execCommand("copy");

        // Change button appearance temporarily
        copyButton.innerHTML = '<i class="fas fa-check me-1"></i> Copied!';
        copyButton.classList.remove('btn-outline-secondary');
        copyButton.classList.add('btn-success');

        setTimeout(() => {
            copyButton.innerHTML = '<i class="far fa-copy me-1"></i> Copy';
            copyButton.classList.remove('btn-success');
            copyButton.classList.add('btn-outline-secondary');
        }, 2000);
    }
</script>
{% endblock %}
